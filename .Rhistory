global_results_obj = T)
})
CIPR(input_dat = allmarkers,
comp_method = "all_genes_spearman",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
View(input_dat[1:100,])
undebug(CIPR)
system.time({
CIPR(input_dat = avg_exp,
comp_method = "all_genes_spearman",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
system.time({
CIPR(input_dat = avg_exp,
comp_method = "all_genes_pearson",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
rm(list = ls(pattern = ".*"))
gc()
# ref_data <- readRDS("../")
allmarkers <- readRDS("allmarkers.rds")
avg_exp <- readRDS("avg_exp.rds")
# ref_data <- readRDS(url("https://github.com/atakanekiz/CIPR/blob/master/data/immgen.rds?raw=true"))
# ref_annot <- readRDS(url("https://github.com/atakanekiz/CIPR/blob/master/data/immgen_annot.rds?raw=true"))
#
# ref_data <- readRDS("immgen.rds")
# ref_annot <- readRDS("immgen_annot.rds")
source("../../../SCseq_tools/CIPR.R")
system.time({
CIPR(input_dat = allmarkers,
comp_method = "logfc_dot_product",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T, update_ref = T)
})
# user  system elapsed
system.time({
CIPR(input_dat = allmarkers,
comp_method = "logfc_spearman",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
system.time({
CIPR(input_dat = allmarkers,
comp_method = "logfc_pearson",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
system.time({
CIPR(input_dat = avg_exp,
comp_method = "all_genes_spearman",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
system.time({
CIPR(input_dat = avg_exp,
comp_method = "all_genes_pearson",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
rm(list = ls(pattern = ".*"))
gc()
# ref_data <- readRDS("../")
allmarkers <- readRDS("allmarkers.rds")
avg_exp <- readRDS("avg_exp.rds")
# ref_data <- readRDS(url("https://github.com/atakanekiz/CIPR/blob/master/data/immgen.rds?raw=true"))
# ref_annot <- readRDS(url("https://github.com/atakanekiz/CIPR/blob/master/data/immgen_annot.rds?raw=true"))
#
# ref_data <- readRDS("immgen.rds")
# ref_annot <- readRDS("immgen_annot.rds")
source("../../../SCseq_tools/CIPR.R")
nnnnnnnnnnnnnnnnnnnnnnn
rm(list = ls(pattern = ".*"))
gc()
# ref_data <- readRDS("../")
allmarkers <- readRDS("allmarkers.rds")
avg_exp <- readRDS("avg_exp.rds")
# ref_data <- readRDS(url("https://github.com/atakanekiz/CIPR/blob/master/data/immgen.rds?raw=true"))
# ref_annot <- readRDS(url("https://github.com/atakanekiz/CIPR/blob/master/data/immgen_annot.rds?raw=true"))
#
# ref_data <- readRDS("immgen.rds")
# ref_annot <- readRDS("immgen_annot.rds")
source("../../../SCseq_tools/CIPR.R")
system.time({
CIPR(input_dat = allmarkers,
comp_method = "logfc_dot_product",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T, update_ref = T)
})
# user  system elapsed
system.time({
CIPR(input_dat = allmarkers,
comp_method = "logfc_spearman",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
system.time({
CIPR(input_dat = allmarkers,
comp_method = "logfc_pearson",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
system.time({
CIPR(input_dat = avg_exp,
comp_method = "all_genes_spearman",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
system.time({
CIPR(input_dat = avg_exp,
comp_method = "all_genes_pearson",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
rm(list = ls(pattern = ".*"))
gc()
# ref_data <- readRDS("../")
allmarkers <- readRDS("allmarkers.rds")
avg_exp <- readRDS("avg_exp.rds")
# ref_data <- readRDS(url("https://github.com/atakanekiz/CIPR/blob/master/data/immgen.rds?raw=true"))
# ref_annot <- readRDS(url("https://github.com/atakanekiz/CIPR/blob/master/data/immgen_annot.rds?raw=true"))
#
# ref_data <- readRDS("immgen.rds")
# ref_annot <- readRDS("immgen_annot.rds")
source("../../../SCseq_tools/CIPR.R")
system.time({
CIPR(input_dat = allmarkers,
comp_method = "logfc_dot_product",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T, update_ref = T)
})
# user  system elapsed
# 6.17    0.47    7.62
system.time({
CIPR(input_dat = allmarkers,
comp_method = "logfc_spearman",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
# user  system elapsed
# 5.45    0.13    5.89
system.time({
CIPR(input_dat = allmarkers,
comp_method = "logfc_pearson",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
# user  system elapsed
# 4.54    0.22    5.08
system.time({
CIPR(input_dat = avg_exp,
comp_method = "all_genes_spearman",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
# user  system elapsed
# 15.35    0.33   16.89
system.time({
CIPR(input_dat = avg_exp,
comp_method = "all_genes_pearson",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
# user  system elapsed
# 8.05    0.44    9.49
rm(list = ls(pattern = ".*"))
gc()
# ref_data <- readRDS("../")
allmarkers <- readRDS("allmarkers.rds")
avg_exp <- readRDS("avg_exp.rds")
# ref_data <- readRDS(url("https://github.com/atakanekiz/CIPR/blob/master/data/immgen.rds?raw=true"))
# ref_annot <- readRDS(url("https://github.com/atakanekiz/CIPR/blob/master/data/immgen_annot.rds?raw=true"))
#
# ref_data <- readRDS("immgen.rds")
# ref_annot <- readRDS("immgen_annot.rds")
source("../../../SCseq_tools/CIPR.R")
system.time({
CIPR(input_dat = allmarkers,
comp_method = "logfc_dot_product",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T, update_ref = T)
})
# user  system elapsed
# 6.17    0.47    7.62
# 9.31    0.37   10.67
system.time({
CIPR(input_dat = allmarkers,
comp_method = "logfc_spearman",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
# user  system elapsed
# 5.45    0.13    5.89
# 9.94    0.42   11.47
system.time({
CIPR(input_dat = allmarkers,
comp_method = "logfc_pearson",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
# user  system elapsed
# 4.54    0.22    5.08
# 8.52    0.24    9.36
system.time({
CIPR(input_dat = avg_exp,
comp_method = "all_genes_spearman",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
# user  system elapsed
# 15.35    0.33   16.89
# 26.44    0.44   28.02
system.time({
CIPR(input_dat = avg_exp,
comp_method = "all_genes_pearson",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
# user  system elapsed
# 8.05    0.44    9.49
# 7.82    0.33    8.74
rm(list = ls(pattern = ".*"))
gc()
# ref_data <- readRDS("../")
allmarkers <- readRDS("allmarkers.rds")
avg_exp <- readRDS("avg_exp.rds")
# ref_data <- readRDS(url("https://github.com/atakanekiz/CIPR/blob/master/data/immgen.rds?raw=true"))
# ref_annot <- readRDS(url("https://github.com/atakanekiz/CIPR/blob/master/data/immgen_annot.rds?raw=true"))
#
# ref_data <- readRDS("immgen.rds")
# ref_annot <- readRDS("immgen_annot.rds")
source("../../../SCseq_tools/CIPR.R")
system.time({
CIPR(input_dat = allmarkers,
comp_method = "logfc_dot_product",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T, update_ref = T)
})
# user  system elapsed
# 6.17    0.47    7.62
# 9.31    0.37   10.67
# 9.09    0.27   10.20
system.time({
CIPR(input_dat = allmarkers,
comp_method = "logfc_spearman",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
# user  system elapsed
# 5.45    0.13    5.89
# 9.94    0.42   11.47
# 9.61    0.50   11.34
system.time({
CIPR(input_dat = allmarkers,
comp_method = "logfc_pearson",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
# user  system elapsed
# 4.54    0.22    5.08
# 8.52    0.24    9.36
# 8.69    0.41    9.89
system.time({
CIPR(input_dat = avg_exp,
comp_method = "all_genes_spearman",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
# user  system elapsed
# 15.35    0.33   16.89
# 26.44    0.44   28.02
# 26.26    0.68   28.46
system.time({
CIPR(input_dat = avg_exp,
comp_method = "all_genes_pearson",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
# user  system elapsed
# 8.05    0.44    9.49
# 7.82    0.33    8.74
# 7.80    0.47    9.18
rm(list = ls(pattern = ".*"))
gc()
# ref_data <- readRDS("../")
allmarkers <- readRDS("allmarkers.rds")
avg_exp <- readRDS("avg_exp.rds")
# ref_data <- readRDS(url("https://github.com/atakanekiz/CIPR/blob/master/data/immgen.rds?raw=true"))
# ref_annot <- readRDS(url("https://github.com/atakanekiz/CIPR/blob/master/data/immgen_annot.rds?raw=true"))
#
# ref_data <- readRDS("immgen.rds")
# ref_annot <- readRDS("immgen_annot.rds")
source("../../../SCseq_tools/CIPR.R")
system.time({
CIPR(input_dat = allmarkers,
comp_method = "logfc_dot_product",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T, update_ref = T)
})
# user  system elapsed
# 6.17    0.47    7.62
# 9.31    0.37   10.67
# 9.09    0.27   10.20
# 9.24    0.30   10.43
system.time({
CIPR(input_dat = allmarkers,
comp_method = "logfc_spearman",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
# user  system elapsed
# 5.45    0.13    5.89
# 9.94    0.42   11.47
# 9.61    0.50   11.34
# 9.39    0.30   10.19
system.time({
CIPR(input_dat = allmarkers,
comp_method = "logfc_pearson",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
# user  system elapsed
# 4.54    0.22    5.08
# 8.52    0.24    9.36
# 8.69    0.41    9.89
# 8.35    0.32    9.28
system.time({
CIPR(input_dat = avg_exp,
comp_method = "all_genes_spearman",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
# user  system elapsed
# 15.35    0.33   16.89
# 26.44    0.44   28.02
# 26.26    0.68   28.46
# 24.93    0.55   26.23
system.time({
CIPR(input_dat = avg_exp,
comp_method = "all_genes_pearson",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
# user  system elapsed
# 8.05    0.44    9.49
# 7.82    0.33    8.74
# 7.80    0.47    9.18
system.time({
CIPR(input_dat = avg_exp,
comp_method = "all_genes_pearson",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
system.time({
CIPR(input_dat = avg_exp,
comp_method = "all_genes_pearson",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
rm(list = ls(pattern = ".*"))
gc()
# ref_data <- readRDS("../")
allmarkers <- readRDS("allmarkers.rds")
avg_exp <- readRDS("avg_exp.rds")
# ref_data <- readRDS(url("https://github.com/atakanekiz/CIPR/blob/master/data/immgen.rds?raw=true"))
# ref_annot <- readRDS(url("https://github.com/atakanekiz/CIPR/blob/master/data/immgen_annot.rds?raw=true"))
#
# ref_data <- readRDS("immgen.rds")
# ref_annot <- readRDS("immgen_annot.rds")
source("../../../SCseq_tools/CIPR.R")
system.time({
CIPR(input_dat = allmarkers,
comp_method = "logfc_dot_product",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T, update_ref = T)
})
# user  system elapsed
# 6.17    0.47    7.62
# 9.31    0.37   10.67
# 9.09    0.27   10.20
# 9.24    0.30   10.43
# 4.80    0.19    5.61
system.time({
CIPR(input_dat = allmarkers,
comp_method = "logfc_spearman",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
# user  system elapsed
# 5.45    0.13    5.89
# 9.94    0.42   11.47
# 9.61    0.50   11.34
# 9.39    0.30   10.19
# 7.36    0.27    8.30
system.time({
CIPR(input_dat = allmarkers,
comp_method = "logfc_pearson",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
# user  system elapsed
# 4.54    0.22    5.08
# 8.52    0.24    9.36
# 8.69    0.41    9.89
# 8.35    0.32    9.28
# 8.41    0.14    9.50
system.time({
CIPR(input_dat = avg_exp,
comp_method = "all_genes_spearman",
reference="custom",
custom_ref_dat_path = "immgen.rds",
custom_ref_annot_path = "immgen_annot.rds",
global_results_obj = T)
})
shiny::runApp('D:/OConnell_lab/R analyses/Shiny Apps/CIPR')
# Testing area (comment out)
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
reference_log <- readRDS("data/immgen_recalc_ratio.rds")
reference <- readRDS("data/immgen.rds")
colnames(reference)
hist(reference[, colnames(reference) == "CD4.1h.LN" ])
hist(reference[, 2 ])
# Testing area (comment out)
# setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
# reference_log <- readRDS("data/immgen_recalc_ratio.rds")
# reference <- readRDS("data/immgen.rds")
ref_annot <- readRDS("data/immgen_annot.rds)
# Testing area (comment out)
# setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
# reference_log <- readRDS("data/immgen_recalc_ratio.rds")
# reference <- readRDS("data/immgen.rds")
ref_annot <- readRDS("data/immgen_annot.rds")
View(ref_annot)
runApp()
